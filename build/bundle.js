!function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var s={leftSliderSide:document.getElementById("leftArrow"),rightSliderSide:document.getElementById("rightArrow"),slideArray:document.getElementsByClassName("item"),blockForDots:document.getElementById("dotsBlock"),dotsArray:document.getElementsByClassName("dot")},i=e=>{for(let t=0;t<e.length;t++)if(e[t].classList.contains("isActiveImg"))return t},a=(e,t,n)=>{t[e].classList.toggle("isActiveImg"),n[e].classList.toggle("isActiveDot"),0===e?(t[t.length-1].classList.toggle("isActiveImg"),n[t.length-1].classList.toggle("isActiveDot")):(t[e-1].classList.toggle("isActiveImg"),n[e-1].classList.toggle("isActiveDot"))},r=(e,t,n)=>{t[e].classList.toggle("isActiveImg"),n[e].classList.toggle("isActiveDot"),e===t.length-1?(t[0].classList.toggle("isActiveImg"),n[0].classList.toggle("isActiveDot")):(t[e+1].classList.toggle("isActiveImg"),n[e+1].classList.toggle("isActiveDot"))},l=(e,t)=>{for(let n=0;n<e;n++){const e=document.createElement("span");e.setAttribute("class","dot"),t.appendChild(e)}},c=(e,t)=>{t[e].classList.add("isActiveDot")};var o={kitchenMenu:document.getElementById("kitchen"),kitchensList:document.getElementById("menuKitchens"),kitchenArrow:document.getElementById("kitchenArrow"),dishesMenu:document.getElementById("dish"),dishesList:document.getElementById("menuDishes"),dishesArrow:document.getElementById("dishesArrow")},d=(e,t,n,s)=>{e.classList.toggle("isActive"),s.style.transform+="rotate(180deg)",t.classList.contains("isActive")&&(t.classList.toggle("isActive"),n.style.transform+="rotate(180deg)")},g=()=>{o.dishesList.classList.contains("isActive")&&(o.dishesList.classList.toggle("isActive"),o.dishesArrow.style.transform+="rotate(180deg)"),o.kitchensList.classList.contains("isActive")&&(o.kitchensList.classList.toggle("isActive"),o.kitchenArrow.style.transform+="rotate(180deg)")};var u={overlay:document.getElementById("overlay"),modalWrap:document.getElementById("modal__wrap"),loginForm:document.getElementById("loginModal"),loginInput:document.getElementById("loginModal__login"),passwordInput:document.getElementById("loginModal__password"),loginBtn:document.getElementById("login_button"),registerBtn:document.getElementById("register_button"),errorDiv:document.getElementById("error"),errorMsg:document.getElementById("errMsg"),successForm:document.getElementById("successForm"),callbackForm:document.getElementById("callback"),callback:document.getElementById("callbackBtn"),successMsg:document.getElementById("successMsg")},m={isOpenModal:null,overlayOn(){u.overlay.style.display="flex",u.modalWrap.style.display="flex"},overlayOff(){u.overlay.style.display="none",u.modalWrap.style.display="none"},closeByOverlay(){let e=this;u.overlay.addEventListener("click",(function(){e.overlayOff(),document.getElementById(`${e.isOpenModal}`).style.display="none"}))},openModal(e,t){const n=document.getElementById(`${e}`),s=document.getElementById(`${t}`);let i=this;n.addEventListener("click",(function(){i.isOpenModal=t,i.overlayOn(),s.style.display="flex",g()}))},closeModal(e,t){const n=document.getElementById(`${e}`),s=document.getElementById(`${t}`);let i=this;n.addEventListener("click",(function(){i.overlayOff(),s.style.display="none"}))},successCallback(){let e=this;u.successForm.style.display="block",u.successMsg.innerText="The operator will call you back within a minute",setTimeout(()=>{u.successForm.style.display="none",e.overlayOff()},3e3)},callBack(){let e=this;u.callback.addEventListener("click",(function(){e.successCallback(),u.callbackForm.style.display="none"}))}},p={isEmptyInput(e,t,n,s){if(""===e.value||""===t.value)return n.style.display="flex",s.innerText="Field cannot be empty, please try again",!0},isUserInStorage(e,t,n){let s=Object.keys(localStorage);for(let i of s)if(e.value===i)return t.style.display="flex",n.innerText="User with this login already exists",!0},successRegister(e,t,n){e.style.display="none",t.style.display="none",n.style.display="block",u.successMsg.innerText="Your account has been create successfully!",setTimeout(()=>{n.style.display="none",m.overlayOff()},3e3)},registerUser(){let e=this;u.registerBtn.addEventListener("click",(function(){e.isEmptyInput(u.loginInput,u.passwordInput,u.errorDiv,u.errorMsg)||(e.isUserInStorage(u.loginInput,u.errorDiv,u.errorMsg)||(localStorage.setItem(u.loginInput.value,u.passwordInput.value),e.successRegister(u.loginForm,u.errorDiv,u.successForm)),u.loginInput.value="",u.passwordInput.value="")}))},loginUser(){let e=this;u.loginBtn.addEventListener("click",(function(){e.isEmptyInput(u.loginInput,u.passwordInput,u.errorDiv,u.errorMsg)}))}};var h={recordsPerPage:5,daysOfWeek:["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],paginationHead:document.getElementById("paginationHeader"),pages:document.getElementsByClassName("page"),showMenuBtn:document.getElementById("menuByDays"),paginationBlock:document.getElementById("pagination"),storage:null},y={drawPaginationHeader(e,t){e.textContent=t},drawPages(e,t,n){const s=document.getElementById("pages"),i=Math.ceil(e.length/n);for(let e=0;e<i;e++){const n=document.createElement("a");n.classList.add("page"),n.textContent=`${e+1}`,s.append(n),e===t-1&&n.classList.add("isActivePage")}},drawRecords(e){const t=document.getElementById("records");for(let n=0;n<e.length;n++){const s=document.createElement("div");s.classList.add("record"),s.textContent=e[n].name,t.append(s)}},clearContainer(){document.getElementById("records").remove();const e=document.createElement("div");e.classList.add("pagination__records"),e.setAttribute("id","records"),document.getElementById("pagination").append(e)},clearPages(){document.getElementById("pages").remove();const e=document.createElement("div");e.classList.add("pagination__pages"),e.setAttribute("id","pages"),document.getElementById("pagination").append(e)}};const v=()=>{const e=()=>(new Date).getDay(),t=()=>h.daysOfWeek[e()-1],n=(e,t)=>e.filter((function(e){return e.day===`${t}`})),s=()=>{const s=new XMLHttpRequest;s.open("GET","/menu",!0),s.send(),s.onreadystatechange=function(){if(4===this.readyState&&200===this.status){let i=JSON.parse(s.response);h.storage=i,y.drawPages(i,e(),h.recordsPerPage),y.drawPaginationHeader(h.paginationHead,t()),y.drawRecords(n(i,t())),(e=>{for(let t=0;t<e.length;t++)e[t].addEventListener("click",(function(e){y.clearContainer();const t=e.target,s=h.daysOfWeek[t.textContent-1];y.drawRecords(n(h.storage,s)),t.classList.contains("isActivePage")||t.classList.toggle("isActivePage")}))})(h.pages)}},404===s.status&&console.log("File or resource not found")};h.showMenuBtn.addEventListener("click",(function(){y.clearContainer(),h.paginationBlock.style.display="flex",s(),y.clearPages()}))};var f=class{constructor(){this.dishesObj={}}addDish(e,t,n){e[t]=n}getDishes(){return this.dishesObj}clearDishes(){for(let e in this.dishesObj)this.dishesObj.hasOwnProperty(e)&&delete this.dishesObj[e]}};var B=class{constructor(e,t){this.model=e,this.view=t}init(){const e=this.model.getDishes();this.model.addDish(e,"pizzas",JSON.parse('[{\n    "name": "Catania",\n    "price": "215",\n    "id" : "1",\n    "url" : "./src/img/pizzas/Catania.png"\n}, {\n    "name": "Fiorenza",\n    "price": "195",\n    "id" : "2",\n    "url" : "./src/img/pizzas/florenza.png"\n}, {\n    "name": "Bavaria",\n    "price": "247",\n    "id" : "3",\n    "url" : "./src/img/pizzas/bavaria.png"\n}, {\n    "name": "Basilicata",\n    "price": "155",\n    "id" : "4",\n    "url" : "./src/img/pizzas/basilicata.png"\n}, {\n    "name": "Campania",\n    "price": "205",\n    "id" : "5",\n    "url" : "./src/img/pizzas/campania.png"\n}, {\n    "name": "Margherita",\n    "price": "148",\n    "id" : "6",\n    "url" : "./src/img/pizzas/margaritta.png"\n}]')),this.model.addDish(e,"sushi",JSON.parse('[{\n    "name": "Sea Max Set",\n    "price": "389",\n    "id": "7",\n    "url": "./src/img/sushi/seaMax.jpg"\n}, {\n    "name": "Philadelphia Set Max",\n    "price": "569",\n    "id": "8",\n    "url": "./src/img/sushi/philadelphia.jpg"\n}, {\n    "name": "De Lux Set",\n    "price": "639",\n    "id": "9",\n    "url": "./src/img/sushi/deLux.jpg"\n}, {\n    "name": "Campai Set",\n    "price": "349",\n    "id": "10",\n    "url": "./src/img/sushi/campai.jpg"\n}, {\n    "name": "Sea Set Middle",\n    "price": "649",\n    "id": "11",\n    "url": "./src/img/sushi/seaSet.jpg"\n}, {\n    "name": "Philadelphia Set Middle",\n    "price": "479",\n    "id": "12",\n    "url": "./src/img/sushi/philaMiddle.jpg"\n}, {\n    "name": "Salmon Mix Set",\n    "price": "349",\n    "id": "13",\n    "url": "./src/img/sushi/salmon.jpg"\n}]')),this.model.addDish(e,"barbecue",JSON.parse('[{\n    "name": "Chicken wings",\n    "price": "350",\n    "id": "15",\n    "url": "./src/img/bbq/chickenWings.jpg"\n}, {\n    "name": "Lula Kebab",\n    "price": "296",\n    "id": "16",\n    "url": "./src/img/bbq/LulaKebab.jpg"\n}, {\n    "name": "BBQ skewers",\n    "price": "123",\n    "id": "17",\n    "url": "./src/img/bbq/BBQskewers.jpg"\n}, {\n    "name": "Pork skewers",\n    "price": "233",\n    "id": "18",\n    "url": "./src/img/bbq/Porkskewers.jpg"\n}, {\n    "name": "Fillet",\n    "price": "256",\n    "id": "19",\n    "url": "./src/img/bbq/Fillet.jpg"\n}]')),this.model.addDish(e,"khachapuri",JSON.parse('[{\n    "name": "Khachapuri in Imereti",\n    "price": "109",\n    "id": "14",\n    "url": "./src/img/khachapuri/imeteri.jpg"\n}, {\n    "name": "Megrelian khachapuri",\n    "price": "119",\n    "id": "15",\n    "url": "./src/img/khachapuri/megreli.jpg"\n}, {\n    "name": "Kubdari",\n    "price": "124",\n    "id": "16",\n    "url": "./src/img/khachapuri/kubdari.jpg"\n}, {\n    "name": "Khachapuri in Adjarian",\n    "price": "99",\n    "id": "17",\n    "url": "./src/img/khachapuri/adjari.jpg"\n}, {\n    "name": "Khachapuri on the ridge ",\n    "price": "95",\n    "id": "18",\n    "url": "./src/img/khachapuri/rizna.jpg"\n}, {\n    "name": "Achma",\n    "price": "85",\n    "id": "19",\n    "url": "./src/img/khachapuri/achme.jpg"\n}]')),this.view.drawList(e)}};var k=class{constructor(){}createBox({tag:e,className:t,id:n,inner:s}){const i=document.createElement(e);if(i.classList.add(t),i.setAttribute("id",n),Array.isArray(s))for(let e=0;e<s.length;e++)i.append(s[e]);else s&&i.append(s);return i}dishConstructor(e,t,n,s){const i=this.createBox({tag:"img",className:"thing__img",id:`thing__img${s}`}),a=this.createBox({tag:"p",className:"thing__name",id:`thing__name${s}`}),r=this.createBox({tag:"p",className:"thing__price",id:`thing__price${s}`}),l=this.createBox({tag:"button",className:"thing__toBasket",id:`thing__price${s}`});i.setAttribute("src",e),a.innerText=t,r.innerText=`₴${n}`,l.innerText="Заказать";const c=this.createBox({tag:"div",className:"thing",id:`thing__price${s}`,inner:[i,a,r,l]});document.getElementById("dishesKitchens").append(c)}drawDishes(e){e.forEach(e=>{this.dishConstructor(e.url,e.name,e.price,e.id)})}clearDishContainer(){const e=document.getElementById("container__dishesKitchens");document.getElementById("dishesKitchens").remove();const t=this.createBox({tag:"div",className:"dishesKitchens",id:"dishesKitchens"});e.append(t)}drawList(e){const t=document.getElementsByClassName("menu__dishes");let n=this;for(let s=0;s<t.length;s++)t[s].addEventListener("click",(function(t){n.clearDishContainer();let s=t.target.getAttribute("id");if("allDishes"===s)for(let t in e)e.hasOwnProperty(t)&&n.drawDishes(e[t]);else n.drawDishes(e[s])}))}};!function(){(()=>{l(s.slideArray.length,s.blockForDots),c(i(s.slideArray),s.dotsArray),s.leftSliderSide.addEventListener("click",(function(){a(i(s.slideArray),s.slideArray,s.dotsArray)})),s.rightSliderSide.addEventListener("click",(function(){r(i(s.slideArray),s.slideArray,s.dotsArray)}));((e,t)=>{for(let n=0;n<e.length;n++)e[n].addEventListener("click",(function(){e[i(t)].classList.toggle("isActiveDot"),c(n,e),t[i(t)].classList.toggle("isActiveImg"),t[n].classList.toggle("isActiveImg")}))})(s.dotsArray,s.slideArray)})(),o.kitchenMenu.addEventListener("click",(function(e){e.stopPropagation(),d(o.kitchensList,o.dishesList,o.dishesArrow,o.kitchenArrow)})),o.dishesMenu.addEventListener("click",(function(e){e.stopPropagation(),d(o.dishesList,o.kitchensList,o.kitchenArrow,o.dishesArrow)})),m.openModal("delivery","deliver"),m.closeModal("deliver__close","deliver"),m.openModal("call","callback"),m.closeModal("callback__close","callback"),m.openModal("login","loginModal"),m.closeModal("loginModal__close","loginModal"),m.closeByOverlay(),m.callBack(),p.registerUser(),p.loginUser(),v();const e=new k,t=new f;new B(t,e).init()}()}]);