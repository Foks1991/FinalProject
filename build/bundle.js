!function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);var s={dotsArray:document.getElementsByClassName("dot"),slideArray:document.getElementsByClassName("item"),blockForDots:document.getElementById("dotsBlock"),leftSliderSide:document.getElementById("leftArrow"),rightSliderSide:document.getElementById("rightArrow")},r=e=>{for(let t=0;t<e.length;t++)if(e[t].classList.contains("isActiveImg"))return t},i=(e,t)=>{for(let n=0;n<e;n++){const e=document.createElement("span");e.setAttribute("class","dot"),t.appendChild(e)}},a=(e,t)=>{t[e].classList.add("isActiveDot")},l=(e,t,n)=>{t[e].classList.toggle("isActiveImg"),n[e].classList.toggle("isActiveDot"),e?(t[e-1].classList.toggle("isActiveImg"),n[e-1].classList.toggle("isActiveDot")):(t[t.length-1].classList.toggle("isActiveImg"),n[t.length-1].classList.toggle("isActiveDot"))},c=(e,t,n)=>{t[e].classList.toggle("isActiveImg"),n[e].classList.toggle("isActiveDot"),e===t.length-1?(t[0].classList.toggle("isActiveImg"),n[0].classList.toggle("isActiveDot")):(t[e+1].classList.toggle("isActiveImg"),n[e+1].classList.toggle("isActiveDot"))};var o={kitchenMenu:document.getElementById("kitchen"),kitchensList:document.getElementById("menuKitchens"),kitchenArrow:document.getElementById("kitchenArrow"),dishesMenu:document.getElementById("dish"),dishesList:document.getElementById("menuDishes"),dishesArrow:document.getElementById("dishesArrow")},d=(e,t,n,s)=>{e.classList.toggle("isActive"),s.style.transform+="rotate(180deg)",t.classList.contains("isActive")&&(t.classList.toggle("isActive"),n.style.transform+="rotate(180deg)")},g=()=>{o.dishesList.classList.contains("isActive")&&(o.dishesList.classList.toggle("isActive"),o.dishesArrow.style.transform+="rotate(180deg)"),o.kitchensList.classList.contains("isActive")&&(o.kitchensList.classList.toggle("isActive"),o.kitchenArrow.style.transform+="rotate(180deg)")};var m={overlay:document.getElementById("overlay"),loginBtn:document.getElementById("login_button"),modalWrap:document.getElementById("modal__wrap"),loginForm:document.getElementById("loginModal"),loginInput:document.getElementById("loginModal__login"),successMsg:document.getElementById("successMsg"),errorModal:document.getElementById("error"),errorBlock:document.getElementById("errMsg"),callbackBtn:document.getElementById("callbackBtn"),registerBtn:document.getElementById("register_button"),successForm:document.getElementById("successForm"),callbackForm:document.getElementById("callback"),passwordInput:document.getElementById("loginModal__password"),emptyError:"Field cannot be empty, please try again",existsError:"User with this login already exists",successLogin:"Welcome",incorrectError:"Login or password does not match any account, please try again",successRegister:"Your account has been create successfully!",overBasket:document.getElementById("overBasket"),basketList:document.getElementById("basketList"),orderWrap:document.getElementById("orderWrap"),orderSum:document.getElementById("orderSum"),clearOrder:document.getElementById("clearOrder"),summaryPrice:void 0},u={isOpenModal:null,overlayOn(){m.overlay.style.display="flex",m.modalWrap.style.display="flex"},overlayOff(){m.overlay.style.display="none",m.modalWrap.style.display="none"},closeByOverlay(){m.overlay.addEventListener("click",()=>{this.overlayOff(),document.getElementById(`${this.isOpenModal}`).style.display="none"})},openModal(e,t,n){const s=document.getElementById(`${e}`),r=document.getElementById(`${t}`);s.addEventListener("click",()=>{this.isOpenModal=t,this.overlayOn(),r.style.display=n,g()})},closeModal(e,t){const n=document.getElementById(`${e}`),s=document.getElementById(`${t}`);n.addEventListener("click",()=>{this.overlayOff(),s.style.display="none"})},successCallback(){m.successForm.style.display="block",m.successMsg.innerText="The operator will call you back within a minute",setTimeout(()=>{m.successForm.style.display="none",this.overlayOff()},2500)},callBack(){m.callbackBtn.addEventListener("click",()=>{this.successCallback(),m.callbackForm.style.display="none"})}},p={errorMsg(e){m.errorModal.style.display="flex",m.errorBlock.innerText=e},isUserInStorage(){for(let e=0;e<localStorage.length;e++)if(localStorage.key(e)===m.loginInput.value)return m.loginInput.value},checkPassword:e=>localStorage.getItem(e),clearInputs(){m.loginInput.value="",m.passwordInput.value=""},successForm(e){m.loginForm.style.display="none",m.errorModal.style.display="none",m.successForm.style.display="block",m.successMsg.innerText=e,setTimeout(()=>{m.successForm.style.display="none",u.overlayOff()},2500)},registerUser(){m.registerBtn.addEventListener("click",()=>{""!==m.loginInput.value&&""!==m.passwordInput.value?(this.isUserInStorage(m.loginInput)?this.errorMsg(m.existsError):(localStorage.setItem(m.loginInput.value,m.passwordInput.value),this.successForm(m.successRegister)),this.clearInputs()):this.errorMsg(m.emptyError)})},loginUser(){m.loginBtn.addEventListener("click",()=>{""!==m.loginInput.value&&""!==m.passwordInput.value?this.isUserInStorage()&&this.checkPassword(this.isUserInStorage())===m.passwordInput.value?(this.successForm(m.successLogin),this.clearInputs()):this.errorMsg(m.incorrectError):this.errorMsg(m.emptyError)})}};class h{static createElem({tag:e,className:t,id:n,inner:s}){const r=document.createElement(e);if(r.classList.add(t),n&&r.setAttribute("id",n),Array.isArray(s))for(let e=0;e<s.length;e++)r.append(s[e]);else s&&r.append(s);return r}dishConstructor(e,t,n,s){const r=h.createElem({tag:"img",className:"thing__img",id:`thing__img${s}`}),i=h.createElem({tag:"p",className:"thing__name",id:`thing__name${s}`}),a=h.createElem({tag:"p",className:"thing__price",id:`thing__price${s}`}),l=h.createElem({tag:"button",className:"thing__toBasket",id:`thing__price${s}`});r.setAttribute("src",e),i.innerText=t,a.innerText=`₴${n}`,l.innerText="Заказать",l.addEventListener("click",e=>{let t=e.target.parentNode;const n=t.children[1].textContent,s=Number(t.children[2].textContent.slice(1));v.addToBasket(n,s)});const c=h.createElem({tag:"div",className:"thing",id:`thing__price${s}`,inner:[r,i,a,l]});document.getElementById("dishesKitchens").append(c)}drawDishes(e){e.forEach(e=>{this.dishConstructor(e.url,e.name,e.price,e.id)})}clearDishContainer(){const e=document.getElementById("container__dishesKitchens");document.getElementById("dishesKitchens").remove();const t=h.createElem({tag:"div",className:"dishesKitchens",id:"dishesKitchens"});e.append(t)}drawList(e){const t=document.getElementsByClassName("menu__dishes");for(let n=0;n<t.length;n++)t[n].addEventListener("click",t=>{this.clearDishContainer();let n=t.target.getAttribute("id");if("allDishes"===n)for(let t in e)e.hasOwnProperty(t)&&this.drawDishes(e[t]);else this.drawDishes(e[n])})}}var y=h,v={addToBasket(e,t){this.basketConstructor(e,t),this.countPriceSum(t)},countPriceSum(e){m.orderSum.innerText=void 0===m.summaryPrice?m.summaryPrice=e:m.summaryPrice+=e},clearOrder1(){m.clearOrder.addEventListener("click",()=>{const e=document.getElementsByClassName("order");for(let t=e.length-1;t>=0;t--)e[t].remove();m.summaryPrice=void 0,m.orderSum.innerText=""})},basketConstructor(e,t){const n=y.createElem({tag:"span",className:"order__name"}),s=y.createElem({tag:"span",className:"order__price"}),r=y.createElem({tag:"span",className:"count__minus"}),i=y.createElem({tag:"span",className:"count__count"}),a=y.createElem({tag:"span",className:"count__plus"}),l=y.createElem({tag:"div",className:"count",inner:[r,i,a]});a.addEventListener("click",e=>{const n=e.target;let s=Number(n.previousSibling.innerText);s+=1,n.previousSibling.innerText=s,n.parentNode.nextSibling.innerText=Number(n.parentNode.nextSibling.textContent)+t,m.orderSum.innerText=Number(m.orderSum.innerText)+t}),r.addEventListener("click",e=>{const n=e.target;let s=Number(n.nextSibling.innerText);if(s>1){s-=1,n.nextSibling.innerText=s,n.parentNode.nextSibling.innerText=Number(n.parentNode.nextSibling.textContent)-t;let e=Number(m.orderSum.innerText)-t;m.orderSum.innerText=String(e)}}),i.innerText=1,n.innerText=e,s.innerText=t;const c=y.createElem({tag:"div",className:"order",inner:[n,l,s]});m.orderWrap.append(c)}};var E={pages:document.getElementsByClassName("page"),storage:null,daysOfWeek:["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],showMenuBtn:document.getElementById("menuByDays"),paginationHead:document.getElementById("paginationHeader"),recordsPerPage:4,paginationBlock:document.getElementById("pagination"),currentPageIndex:void 0},k={drawPaginationHeader(e,t){e.textContent=t},drawPages(e,t,n){const s=document.getElementById("pages"),r=Math.ceil(e.length/n);for(let e=0;e<r;e++){const n=y.createElem({tag:"a",className:"page"});n.textContent=`${e+1}`,s.append(n),e===t-1&&(E.currentPageIndex=e,n.classList.add("isActivePage")),t||6!==e||(E.currentPageIndex=e,n.classList.add("isActivePage"))}},recordConstructor(e,t){const n=y.createElem({tag:"span",className:"record__name"}),s=y.createElem({tag:"button",className:"record__button"}),r=y.createElem({tag:"span",className:"record__price"});return n.innerText=e,s.innerText="Заказать",s.addEventListener("click",e=>{let t=e.target.parentNode;const n=t.children[0].textContent,s=Number(t.children[2].textContent);v.addToBasket(n,s)}),r.innerText=t,y.createElem({tag:"div",className:"record",inner:[n,s,r]})},drawRecords(e){const t=document.getElementById("records");for(let n=0;n<e.length;n++)t.append(this.recordConstructor(e[n].name,e[n].price))},clearContainer(){document.getElementById("records").remove();const e=y.createElem({tag:"div",className:"pagination__records",id:"records"});document.getElementById("pagination").append(e)},clearPages(){document.getElementById("pages").remove();const e=y.createElem({tag:"div",className:"pagination__pages",id:"pages"});document.getElementById("pagination").append(e)}};const b=()=>{const e=()=>(new Date).getDay(),t=()=>e()?E.daysOfWeek[e()-1]:E.daysOfWeek[6],n=(e,t)=>e.filter(e=>e.day===`${t}`),s=()=>{const s=new XMLHttpRequest;s.open("GET","/menu",!0),s.send(),s.onreadystatechange=function(){4===this.readyState&&200===this.status&&(E.storage=JSON.parse(s.response),k.drawPages(E.storage,e(),E.recordsPerPage),k.drawPaginationHeader(E.paginationHead,t()),k.drawRecords(n(E.storage,t())),(e=>{for(let t=0;t<e.length;t++)e[t].addEventListener("click",s=>{k.clearContainer();const r=s.target,i=E.daysOfWeek[r.textContent-1];k.drawRecords(n(E.storage,i)),r.classList.toggle("isActivePage"),e[E.currentPageIndex].classList.toggle("isActivePage"),E.currentPageIndex=t,k.drawPaginationHeader(E.paginationHead,E.daysOfWeek[t])})})(E.pages))}};E.showMenuBtn.addEventListener("click",(function(){k.clearPages(),k.clearContainer(),s(),E.paginationBlock.style.display="flex"}))};var f=class{constructor(){this.dishesObj={}}addDish(e,t,n){e[t]=n}getDishes(){return this.dishesObj}clearDishes(){for(let e in this.dishesObj)this.dishesObj.hasOwnProperty(e)&&delete this.dishesObj[e]}};var I=class{constructor(e,t){this.model=e,this.view=t}init(){this.model.addDish(this.model.getDishes(),"pizzas",JSON.parse('[{\n    "name": "Catania",\n    "price": "215",\n    "id" : "1",\n    "url" : "./src/img/pizzas/Catania.png"\n}, {\n    "name": "Fiorenza",\n    "price": "195",\n    "id" : "2",\n    "url" : "./src/img/pizzas/florenza.png"\n}, {\n    "name": "Bavaria",\n    "price": "247",\n    "id" : "3",\n    "url" : "./src/img/pizzas/bavaria.png"\n}, {\n    "name": "Basilicata",\n    "price": "155",\n    "id" : "4",\n    "url" : "./src/img/pizzas/basilicata.png"\n}, {\n    "name": "Campania",\n    "price": "205",\n    "id" : "5",\n    "url" : "./src/img/pizzas/campania.png"\n}, {\n    "name": "Margherita",\n    "price": "148",\n    "id" : "6",\n    "url" : "./src/img/pizzas/margaritta.png"\n}]')),this.model.addDish(this.model.getDishes(),"sushi",JSON.parse('[{\n    "name": "Sea Max Set",\n    "price": "389",\n    "id": "7",\n    "url": "./src/img/sushi/seaMax.jpg"\n}, {\n    "name": "Philadelphia Set Max",\n    "price": "569",\n    "id": "8",\n    "url": "./src/img/sushi/philadelphia.jpg"\n}, {\n    "name": "De Lux Set",\n    "price": "639",\n    "id": "9",\n    "url": "./src/img/sushi/deLux.jpg"\n}, {\n    "name": "Campai Set",\n    "price": "349",\n    "id": "10",\n    "url": "./src/img/sushi/campai.jpg"\n}, {\n    "name": "Sea Set Middle",\n    "price": "649",\n    "id": "11",\n    "url": "./src/img/sushi/seaSet.jpg"\n}, {\n    "name": "Philadelphia Set Middle",\n    "price": "479",\n    "id": "12",\n    "url": "./src/img/sushi/philaMiddle.jpg"\n}, {\n    "name": "Salmon Mix Set",\n    "price": "349",\n    "id": "13",\n    "url": "./src/img/sushi/salmon.jpg"\n}]')),this.model.addDish(this.model.getDishes(),"barbecue",JSON.parse('[{\n    "name": "Chicken wings",\n    "price": "350",\n    "id": "20",\n    "url": "./src/img/bbq/chickenWings.jpg"\n}, {\n    "name": "Lula Kebab",\n    "price": "296",\n    "id": "21",\n    "url": "./src/img/bbq/LulaKebab.jpg"\n}, {\n    "name": "BBQ skewers",\n    "price": "123",\n    "id": "22",\n    "url": "./src/img/bbq/BBQskewers.jpg"\n}, {\n    "name": "Pork skewers",\n    "price": "233",\n    "id": "23",\n    "url": "./src/img/bbq/Porkskewers.jpg"\n}, {\n    "name": "Fillet",\n    "price": "256",\n    "id": "24",\n    "url": "./src/img/bbq/Fillet.jpg"\n}]')),this.model.addDish(this.model.getDishes(),"khachapuri",JSON.parse('[{\n    "name": "Khachapuri in Imereti",\n    "price": "109",\n    "id": "14",\n    "url": "./src/img/khachapuri/imeteri.jpg"\n}, {\n    "name": "Megrelian khachapuri",\n    "price": "119",\n    "id": "15",\n    "url": "./src/img/khachapuri/megreli.jpg"\n}, {\n    "name": "Kubdari",\n    "price": "124",\n    "id": "16",\n    "url": "./src/img/khachapuri/kubdari.jpg"\n}, {\n    "name": "Khachapuri in Adjarian",\n    "price": "99",\n    "id": "17",\n    "url": "./src/img/khachapuri/adjari.jpg"\n}, {\n    "name": "Khachapuri on the ridge ",\n    "price": "95",\n    "id": "18",\n    "url": "./src/img/khachapuri/rizna.jpg"\n}, {\n    "name": "Achma",\n    "price": "85",\n    "id": "19",\n    "url": "./src/img/khachapuri/achme.jpg"\n}]')),this.view.drawList(this.model.getDishes())}};!function(){i(s.slideArray.length,s.blockForDots),a(r(s.slideArray),s.dotsArray),((e,t)=>{for(let n=0;n<e.length;n++)e[n].addEventListener("click",()=>{e[r(t)].classList.toggle("isActiveDot"),a(n,e),t[r(t)].classList.toggle("isActiveImg"),t[n].classList.toggle("isActiveImg")})})(s.dotsArray,s.slideArray),s.leftSliderSide.addEventListener("click",()=>{l(r(s.slideArray),s.slideArray,s.dotsArray)}),s.rightSliderSide.addEventListener("click",()=>{c(r(s.slideArray),s.slideArray,s.dotsArray)}),o.kitchenMenu.addEventListener("click",(function(e){e.stopPropagation(),d(o.kitchensList,o.dishesList,o.dishesArrow,o.kitchenArrow)})),o.dishesMenu.addEventListener("click",(function(e){e.stopPropagation(),d(o.dishesList,o.kitchensList,o.kitchenArrow,o.dishesArrow)})),u.openModal("delivery","deliver","flex"),u.openModal("call","callback","flex"),u.openModal("login","loginModal","flex"),u.openModal("overBasket","basketList","block"),u.closeModal("deliver__close","deliver"),u.closeModal("callback__close","callback"),u.closeModal("loginModal__close","loginModal"),u.closeByOverlay(),u.callBack(),p.loginUser(),p.registerUser(),v.clearOrder1(),b();const e=new y,t=new f;new I(t,e).init()}()}]);